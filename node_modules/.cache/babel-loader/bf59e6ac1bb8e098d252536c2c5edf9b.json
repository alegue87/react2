{"ast":null,"code":"import axios from 'axios';\nimport Cookies from 'universal-cookie';\nexport default class LoginService {\n  login(username, password, onSuccess, onError) {\n    // Da cambiare email->username\n    axios.post('http://localhost:3000/testAPI/login', {\n      username: username,\n      password: password\n    }).then(function (result) {\n      if (result.data.loginSuccess) {\n        console.log(\"Login effettuato, token\" + result.data.token);\n        onSuccess(username, result.data.token);\n        const cookies = new Cookies();\n        cookies.set('token', result.data.token, {\n          path: '/'\n        });\n        cookies.set('username', username, {\n          path: '/'\n        });\n      } else {\n        onError('Username o password errati');\n      }\n    }, function (error) {\n      console.error(\"Errore durante il login: \" + error);\n      onError(error);\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/alessio/dev/react2/react2/src/components/login/loginService.js"],"names":["axios","Cookies","LoginService","login","username","password","onSuccess","onError","post","then","result","data","loginSuccess","console","log","token","cookies","set","path","error"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AAEA,eAAe,MAAMC,YAAN,CAAkB;AAC7BC,EAAAA,KAAK,CAACC,QAAD,EAAWC,QAAX,EAAqBC,SAArB,EAAgCC,OAAhC,EAAwC;AACzC;AACAP,IAAAA,KAAK,CAACQ,IAAN,CAAW,qCAAX,EAAkD;AAACJ,MAAAA,QAAQ,EAACA,QAAV;AAAoBC,MAAAA,QAAQ,EAAEA;AAA9B,KAAlD,EACKI,IADL,CACU,UAASC,MAAT,EAAgB;AAClB,UAAGA,MAAM,CAACC,IAAP,CAAYC,YAAf,EAA4B;AACzBC,QAAAA,OAAO,CAACC,GAAR,CAAY,4BAA4BJ,MAAM,CAACC,IAAP,CAAYI,KAApD;AACCT,QAAAA,SAAS,CAACF,QAAD,EAAWM,MAAM,CAACC,IAAP,CAAYI,KAAvB,CAAT;AACA,cAAMC,OAAO,GAAG,IAAIf,OAAJ,EAAhB;AACAe,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBP,MAAM,CAACC,IAAP,CAAYI,KAAjC,EAAwC;AAAEG,UAAAA,IAAI,EAAE;AAAR,SAAxC;AACAF,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBb,QAAxB,EAAkC;AAACc,UAAAA,IAAI,EAAE;AAAP,SAAlC;AACH,OAND,MAOI;AACAX,QAAAA,OAAO,CAAC,4BAAD,CAAP;AACH;AAGJ,KAdL,EAcM,UAASY,KAAT,EAAe;AACbN,MAAAA,OAAO,CAACM,KAAR,CAAc,8BAA4BA,KAA1C;AACAZ,MAAAA,OAAO,CAACY,KAAD,CAAP;AACH,KAjBL;AAkBH;;AArB4B","sourcesContent":["import axios from 'axios';\nimport Cookies from 'universal-cookie';\n\nexport default class LoginService{\n    login(username, password, onSuccess, onError){\n        // Da cambiare email->username\n        axios.post('http://localhost:3000/testAPI/login', {username:username, password: password})\n            .then(function(result){\n                if(result.data.loginSuccess){\n                   console.log(\"Login effettuato, token\" + result.data.token)\n                    onSuccess(username, result.data.token)\n                    const cookies = new Cookies();\n                    cookies.set('token', result.data.token, { path: '/' })\n                    cookies.set('username', username, {path: '/'}) \n                }\n                else{\n                    onError('Username o password errati')\n                }\n                \n\n            },function(error){\n                console.error(\"Errore durante il login: \"+error)\n                onError(error)\n            })\n    }\n}"]},"metadata":{},"sourceType":"module"}