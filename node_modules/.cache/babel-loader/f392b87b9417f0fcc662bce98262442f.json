{"ast":null,"code":"var _jsxFileName = \"/home/alessio/dev/react2/react2/src/components/history/history.js\";\nimport React from 'react';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport Grid from '@material-ui/core/Grid';\nimport Container from '@material-ui/core/Container';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Table from '@material-ui/core/Table';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableBody from '@material-ui/core/TableBody';\nimport axios from 'axios';\nimport Cookie from 'universal-cookie';\nimport { scryRenderedComponentsWithType } from 'react-dom/test-utils';\n\nconst _require = require('../../config'),\n      BASE_URL = _require.BASE_URL,\n      HOST_PORT = _require.HOST_PORT;\n\nexport default class History extends React.Component {\n  constructor(props) {\n    super(props);\n    console.log(props);\n    this.state = {\n      image: '',\n      imagesData: [],\n      imageIndex: 0\n    };\n    var cookie = new Cookie();\n    this.username = cookie.get('username');\n    var splittedPathname = this.props.history.location.pathname.split('/');\n    this.pair = splittedPathname[2];\n    this.year = splittedPathname[3];\n    this.month = splittedPathname[4];\n  }\n\n  previousImage() {\n    if (this.state.imageIndex == 0) {\n      this.setState({\n        imageIndex: this.state.imagesData.length - 1\n      });\n    } else {\n      this.setState({\n        imageIndex: this.state.imageIndex - 1\n      });\n    }\n  }\n\n  nextImage() {\n    if (this.state.imageIndex == this.state.imagesData.length - 1) {\n      this.setState({\n        imageIndex: 0\n      });\n    } else {\n      this.setState({\n        imageIndex: this.state.imageIndex + 1\n      });\n    }\n  }\n\n  onKeyPress(event) {\n    if (event.keyCode == 37) {\n      this.previousImage();\n    } else if (event.keyCode == 39) {\n      this.nextImage();\n    }\n  }\n\n  componentWillMount() {\n    var cookie = new Cookie();\n    var token = cookie.get('token');\n    var that = this;\n    axios.get(BASE_URL + '/imagesData', {\n      params: {\n        token: token,\n        username: that.username,\n        pair: that.pair,\n        month: that.month,\n        year: that.year\n      }\n    }).then(function (result) {\n      console.log(result);\n\n      if (result.data.authenticated) {\n        that.setState({\n          imagesData: result.data.info\n        });\n      } else {\n        window.location.href = '/login';\n      }\n    }, function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    var image = \"\",\n        period = \"Periodo: \",\n        datetime = \"Data ora: \",\n        balance = \"Balance: \",\n        equity = \"Equity: \",\n        leverage = \"Leverage: \",\n        free_margin = \"Margine libero: \",\n        profit = \"Profitto: \",\n        positions = [];\n\n    if (this.state.imagesData[0] != undefined) {\n      image = HOST_PORT + '/' + this.username + '/' + this.pair + '/' + this.state.imagesData[this.state.imageIndex].filename;\n      var data = this.state.imagesData[this.state.imageIndex];\n      var dt = new Date(data.datetime);\n      period += data.period + ' M'; // Da prendere nel modo corretto\n\n      datetime += dt.getDate() + '-' + (dt.getMonth() + 1) + '-' + dt.getFullYear() + ' ' + dt.getHours() + ':' + dt.getMinutes() + ':' + dt.getSeconds();\n      balance += data.balance + ' €';\n      equity += data.equity + ' €';\n      leverage += \"1:\" + data.leverage;\n      free_margin += Math.floor(data.free_margin);\n      profit += Math.floor(data.profit) + ' €';\n      positions = data.positions;\n    }\n\n    document.addEventListener(\"keydown\", this.onKeyPress.bind(this), false);\n    return React.createElement(\"div\", {\n      style: {\n        paddingTop: '70px',\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Container, {\n      width: \"xl\",\n      maxWidth: \"xl\",\n      style: {\n        height: '600px',\n        margin: '0px',\n        padding: '0px',\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 0,\n      width: \"lg\",\n      style: {\n        height: 'inherit'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 2,\n      lg: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(List, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: period,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: datetime,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: balance,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: equity,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: leverage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: free_margin,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), React.createElement(ListItem, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: profit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), \" \")))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 1,\n      lg: 1,\n      style: {\n        margin: 'auto',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      onClick: this.previousImage.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(ChevronLeftIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 8,\n      lg: 8,\n      style: {\n        margin: 'auto',\n        textAlign: 'center',\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(Paper, {\n      style: {\n        padding: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: image,\n      alt: \"\",\n      style: {\n        maxWidth: \"100%\",\n        display: 'flex'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 1,\n      lg: 1,\n      style: {\n        margin: 'auto',\n        textAlign: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(IconButton, {\n      onClick: this.nextImage.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(ChevronRightIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }))), React.createElement(Grid, {\n      item: true,\n      xs: 0,\n      sm: 3,\n      lg: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 8,\n      lg: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(TableContainer, {\n      component: Paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(Table, {\n      size: \"small\",\n      \"aria-label\": \"a dense table\",\n      style: {\n        marginTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(TableHead, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Ticket\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, \"Apertura\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, \"Tipo\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Lotti\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, \"Profit\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, \"Swap\"), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Commissioni\"))), React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, positions.map(row => React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, row.ticket), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, row.open_time), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }, row.pos_type), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, row.lots), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, row.profit), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, row.swap), React.createElement(TableCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, row.commission))))))), React.createElement(Grid, {\n      item: true,\n      xs: 0,\n      sm: 1,\n      lg: 1,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/home/alessio/dev/react2/react2/src/components/history/history.js"],"names":["React","ChevronLeftIcon","ChevronRightIcon","Grid","Container","IconButton","Paper","List","ListItem","ListItemText","Table","TableCell","TableContainer","TableHead","TableRow","TableBody","axios","Cookie","scryRenderedComponentsWithType","require","BASE_URL","HOST_PORT","History","Component","constructor","props","console","log","state","image","imagesData","imageIndex","cookie","username","get","splittedPathname","history","location","pathname","split","pair","year","month","previousImage","setState","length","nextImage","onKeyPress","event","keyCode","componentWillMount","token","that","params","then","result","data","authenticated","info","window","href","error","render","period","datetime","balance","equity","leverage","free_margin","profit","positions","undefined","filename","dt","Date","getDate","getMonth","getFullYear","getHours","getMinutes","getSeconds","Math","floor","document","addEventListener","bind","paddingTop","width","height","margin","padding","display","textAlign","maxWidth","marginTop","map","row","ticket","open_time","pos_type","lots","swap","commission"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport Grid from '@material-ui/core/Grid';\nimport Container from '@material-ui/core/Container';\nimport IconButton from '@material-ui/core/IconButton';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Table from '@material-ui/core/Table';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableBody from '@material-ui/core/TableBody';\nimport axios from 'axios';\nimport Cookie from 'universal-cookie';\nimport { scryRenderedComponentsWithType } from 'react-dom/test-utils';\nconst { BASE_URL, HOST_PORT } = require('../../config');\n\nexport default class History extends React.Component {\n    constructor(props) {\n        super(props)\n        console.log(props)\n        this.state = {\n            image: '',\n            imagesData:[],\n            imageIndex:0\n        }\n        var cookie = new Cookie();\n        this.username = cookie.get('username');\n        var splittedPathname = this.props.history.location.pathname.split('/')\n        this.pair = splittedPathname[2]\n        this.year = splittedPathname[3]\n        this.month = splittedPathname[4]        \n    }\n    previousImage(){\n        if(this.state.imageIndex == 0){\n            this.setState({imageIndex: this.state.imagesData.length-1})\n        }\n        else{\n            this.setState({imageIndex: this.state.imageIndex-1})\n        }\n    }\n    nextImage(){\n        if(this.state.imageIndex == this.state.imagesData.length-1)\n        {\n            this.setState({imageIndex: 0})\n        }\n        else{\n            this.setState({imageIndex: this.state.imageIndex+1})    \n        }\n    }\n\n    onKeyPress(event){\n        if(event.keyCode == 37){\n            this.previousImage()\n        }\n        else if(event.keyCode == 39)\n        {\n            this.nextImage()\n        }\n    }\n    componentWillMount() {\n        var cookie = new Cookie();\n        var token = cookie.get('token')\n        var that = this\n        axios.get(BASE_URL + '/imagesData', { params: {\n                token: token,\n                username: that.username,\n                pair: that.pair,\n                month: that.month,\n                year: that.year\n            } }).then(\n            function (result) {\n                console.log(result)\n                if(result.data.authenticated){\n                    that.setState({imagesData: result.data.info})    \n                }\n                else{\n                    window.location.href = '/login'\n                }\n                \n            },\n            function (error) {\n                console.log(error)\n            }\n        )\n    }\n    render() {\n        var image = \"\",\n            period = \"Periodo: \", \n            datetime = \"Data ora: \", \n            balance = \"Balance: \", \n            equity = \"Equity: \", \n            leverage = \"Leverage: \", \n            free_margin = \"Margine libero: \", \n            profit = \"Profitto: \",\n            positions = []\n\n        if(this.state.imagesData[0] != undefined){\n            image = HOST_PORT+'/'+this.username+'/'+this.pair+'/'+this.state.imagesData[this.state.imageIndex].filename;\n            var data = this.state.imagesData[this.state.imageIndex]\n            var dt = new Date(data.datetime)\n            period += data.period +' M' // Da prendere nel modo corretto\n            datetime += dt.getDate()+'-'+(dt.getMonth()+1)+'-'+dt.getFullYear()+' '+dt.getHours()+':'+dt.getMinutes()+':'+dt.getSeconds()\n            balance += data.balance + ' €'\n            equity += data.equity + ' €'\n            leverage += \"1:\"+data.leverage\n            free_margin += Math.floor(data.free_margin)\n            profit += Math.floor(data.profit) +' €'\n            positions = data.positions\n        }\n        document.addEventListener(\"keydown\", this.onKeyPress.bind(this), false)\n        return (\n            <div style={{ paddingTop: '70px', width: '100%' }}>\n                <Container width='xl' maxWidth='xl' style={{ height: '600px', margin: '0px', padding: '0px', display: 'flex' }}>\n                    <Grid container spacing={0} width='lg' style={{ height: 'inherit', }}>\n                        <Grid item xs={12} sm={2} lg={2}>\n                            <Paper>\n                                <List>\n                                    <ListItem><ListItemText primary={period}/></ListItem>\n                                    <ListItem><ListItemText primary={datetime}/></ListItem>\n                                    <ListItem><ListItemText primary={balance}/></ListItem>\n                                    <ListItem><ListItemText primary={equity}/></ListItem>\n                                    <ListItem><ListItemText primary={leverage}/></ListItem>\n                                    <ListItem><ListItemText primary={free_margin}/></ListItem>\n                                    <ListItem><ListItemText primary={profit}/> </ListItem>\n                                </List>\n                            </Paper>\n\n                        </Grid>\n                        <Grid item xs={12} sm={1} lg={1} style={{ margin: 'auto', textAlign: 'center' }}>\n                            <IconButton\n                                onClick={this.previousImage.bind(this)}\n                            ><ChevronLeftIcon /></IconButton>\n                        </Grid>\n                        <Grid item xs={12} sm={8} lg={8} style={{ margin: 'auto', textAlign: 'center', display: 'flex' }}>\n                            <Paper style={{padding:'5px'}}>\n                                <img src={image} alt=\"\" style={{ maxWidth: \"100%\", display: 'flex' }} />   \n                            </Paper>\n                        </Grid>                       \n                        <Grid item xs={12} sm={1} lg={1} style={{ margin: 'auto', textAlign: 'center' }}>\n                            <IconButton\n                                onClick={this.nextImage.bind(this)}\n                            ><ChevronRightIcon />\n                            </IconButton>\n                        </Grid>\n                        <Grid item xs={0} sm={3} lg={3}/>\n                        <Grid item xs={12} sm={8} lg={8}>\n                            <TableContainer component={Paper}>\n                                <Table size=\"small\" aria-label=\"a dense table\" style={{marginTop:'20px'}}>\n                                    <TableHead>\n                                        <TableRow>\n                                            <TableCell>Ticket</TableCell>\n                                            <TableCell>Apertura</TableCell>\n                                            <TableCell>Tipo</TableCell>\n                                            <TableCell>Lotti</TableCell>\n                                            <TableCell>Profit</TableCell>\n                                            <TableCell>Swap</TableCell>\n                                            <TableCell>Commissioni</TableCell>\n                                        </TableRow>\n                                    </TableHead>\n                                    <TableBody>\n                                        {positions.map( row => (\n                                        <TableRow>\n                                            <TableCell>{row.ticket}</TableCell>\n                                            <TableCell>{row.open_time}</TableCell>\n                                            <TableCell>{row.pos_type}</TableCell>\n                                            <TableCell>{row.lots}</TableCell>\n                                            <TableCell>{row.profit}</TableCell>\n                                            <TableCell>{row.swap}</TableCell>\n                                            <TableCell>{row.commission}</TableCell>\n                                        </TableRow>\n                                        ))}\n                                    </TableBody>\n                                </Table>\n                            </TableContainer>\n                        </Grid>\n                        <Grid item xs={0} sm={1} lg={1}/>\n                    </Grid>\n                </Container>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}